import{v as t,ag as e,bH as s,x as i,f as l,i as r,_ as n,n as o,t as a,s as d,e as h}from "./shell-5af0f000.js";import{C as c,F as p,N as u}from"./faceplate-carousel-de4b12c5.js";import{e as f,n as y}from"./ref-f4a25b5a.js";import"./ad-event-tracker-7f7937af.js";import"./search-dynamic-id-cache-controller-054bbb72.js";import"./TinyGesture-fec3f2ea.js";var L;let w=L=class extends(t(d)){constructor(){super(...arguments),this.isMobile=!1,this.shouldDisplayLeftArrow=!1,this.shouldDisplayRightArrow=!0,this.childrenIndexList=[],this.childrenInViewIndexList=[],this.galleryContainerRef=f(),this.debouncedUpdateDisplayState=e((()=>this.updateDisplayState()),100),this.renderArrow=(t, e)=>{const l=t===s.Backward?"left-[8px]":"right-[8px]",r=t===s.Backward?c.BACKWARDS:c.FORWARDS;return i`<span \n class="absolute top-[85px] hidden xs:inline ${l} ${(t=>t?"opacity-100 visible":"opacity-0 invisible")(e)}" \n role="button" \n @click="${e=>this.handleClickOnArrow(e,t)}" \n @keydown="${e=>this.handleKeyDownOnArrow(e,t)}" \n>\n ${p.navButton({placement:u.INSIDE,progress:r})}\n </span>`}}static get styles(){return[l,r`::slotted(*){scroll-snap-align:start}`]}get _slottedChildren(){return this.shadowRoot.querySelector("slot").assignedElements({flatten:!0})}updateChildrenIndexLists(t){const e=[];this.childrenIndexList=[],this._slottedChildren.map(((s, i)=>{s.clientWidth>0&&(this.childrenIndexList.push(i),((t, e)=>{const s=t.getBoundingClientRect(),i=e.getBoundingClientRect();return s.top>=i.top&&s.bottom<=i.bottom&&s.right<=i.right&&s.left>=i.left})(s,t)&&e.push(i))})),this.childrenInViewIndexList=e}updateDisplayState(){const t=this.galleryContainerRef.value;if(!t)return;this.updateChildrenIndexLists(t);const e=t.scrollWidth-t.clientWidth;if(e<L.SCROLL_EDGE_THRESHOLD)return this.shouldDisplayLeftArrow=!1,void(this.shouldDisplayRightArrow=!1);this.shouldDisplayLeftArrow=t.scrollLeft>L.SCROLL_EDGE_THRESHOLD,this.shouldDisplayRightArrow=e-t.scrollLeft>L.SCROLL_EDGE_THRESHOLD}handleClickOnArrow(t, e){t.stopPropagation();const i=this.galleryContainerRef.value;if(!i)return;const l=this.childrenInViewIndexList[0],r=this.childrenInViewIndexList.length,n=e===s.Backward?Math.max(l-r-1,0):Math.min(l+r,this.childrenIndexList.length-1),o=this._slottedChildren[this.childrenIndexList[n]],a=o.offsetLeft-o.parentElement.offsetLeft;i.scrollTo(a,0)}handleKeyDownOnArrow(t, e){"Enter"===t.code&&this.handleClickOnArrow(t,e)}render(){const t="flex flex-row w-full overflow-x-scroll list-none m-0 p-0 scrollbar-hide snap-mandatory snap-x scroll-smooth";return this.isMobile?i`<div class="relative">\n <ul class="${t}">\n <slot></slot>\n </ul>\n </div>`:i`\n <div class="relative">\n <ul ${y(this.galleryContainerRef)} class="${t}">\n <slot></slot>\n </ul>\n ${this.renderArrow(s.Backward,this.shouldDisplayLeftArrow)}\n ${this.renderArrow(s.Forward,this.shouldDisplayRightArrow)}\n </div>\n `}firstUpdated(){!this.isMobile&&this.galleryContainerRef.value&&(this.galleryContainerRef.value.addEventListener("scroll",this.debouncedUpdateDisplayState,{passive:!0}),this.updateDisplayState())}disconnectedCallback(){!this.isMobile&&this.galleryContainerRef.value&&this.galleryContainerRef.value.removeEventListener("scroll",this.debouncedUpdateDisplayState),super.disconnectedCallback()}};w.SCROLL_EDGE_THRESHOLD=100,n([o({type:Boolean,attribute:"is-mobile"})],w.prototype,"isMobile",void 0),n([a()],w.prototype,"shouldDisplayLeftArrow",void 0),n([a()],w.prototype,"shouldDisplayRightArrow",void 0),n([a()],w.prototype,"childrenIndexList",void 0),n([a()],w.prototype,"childrenInViewIndexList",void 0),w=L=n([h("trending-gallery-carousel")],w);
//# sourceMappingURL=trending-carousel-client-js-1ebad05f.js.map
